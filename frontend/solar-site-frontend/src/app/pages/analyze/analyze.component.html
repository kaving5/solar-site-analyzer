<div class="analyze-page">
  <h2 class="page-title">Analyze Sites</h2>

  <p class="subtitle">
    Adjust weights to reflect decision priorities
    <br />
    <small>(Total must be exactly <strong>1.0</strong>)</small>
  </p>

  <!-- Weight Controls -->
  <div class="weights-card">

    <div class="weight-row" *ngFor="let key of weightKeys">
      <label>{{ key | titlecase }}</label>

      <input
        type="number"
        step="0.05"
        min="0"
        max="1"
        [(ngModel)]="weights[key]"
      />
    </div>

    <div class="total-weight">
      <span>Total Weight</span>
      <strong
        [ngClass]="{
          valid: totalWeight === 1,
          invalid: totalWeight !== 1
        }"
      >
        {{ totalWeight | number:'1.2-2' }}
      </strong>
    </div>

    <button
      class="btn primary"
      (click)="analyze()"
      [disabled]="totalWeight !== 1 || loading"
    >
      {{ loading ? 'Analyzingâ€¦' : 'Run Analysis' }}
    </button>

    <p *ngIf="errorMessage" class="error-text">
      {{ errorMessage }}
    </p>

  </div>

  <!-- Results -->
  <div *ngIf="results.length" class="results-card">

    <h3>Analysis Results</h3>

    <div class="result-row header">
      <span>Site</span>
      <span>Score</span>
    </div>

    <div class="result-row" *ngFor="let r of results">
      <span>{{ r.site_name }}</span>
      <span class="score">{{ r.total_score | number:'1.1-1' }}</span>
    </div>

  </div>

</div>
